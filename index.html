<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° / ‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤</title>
  <link href="https://fonts.googleapis.com/css2?family=Prompt&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Prompt', sans-serif;
      background-color: #f4f7f6;
    }
    .container {
      max-width: 600px;
      margin-top: 2rem;
      margin-bottom: 2rem;
      background: #fff;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgb(0 0 0 / 0.1);
    }
    h4 {
      color: #00923F;
      font-weight: 700;
      margin-bottom: 1.5rem;
    }
    .step {
      display: none;
    }
    .step.active {
      display: block;
    }
    .progress {
      height: 8px;
      border-radius: 4px;
      margin-bottom: 2rem;
      background-color: #d3e4d8;
    }
    .progress-bar {
      background-color: #00923F;
    }
    label {
      font-weight: 600;
      margin-bottom: .4rem;
    }
    select.form-select,
    input.form-control,
    textarea.form-control {
      border-radius: 8px;
      padding: 0.5rem 0.75rem;
      box-shadow: none;
      border: 1.5px solid #ced4da;
      transition: border-color 0.3s;
    }
    select.form-select:focus,
    input.form-control:focus,
    textarea.form-control:focus {
      border-color: #00923F;
      box-shadow: 0 0 5px #38b00070;
      outline: none;
    }
    .btn-action {
      background-color: #00923F;
      color: #fff;
      font-weight: 700;
      border-radius: 8px;
      padding: 0.5rem 1.2rem;
      box-shadow: 0 4px 8px rgb(0 146 63 / 0.35);
      transition: background-color 0.3s ease;
    }
    .btn-action:hover, .btn-action:focus {
      background-color: #007c2f;
      color: #fff;
    }
    .btn-secondary {
      border-radius: 8px;
    }
    .img-thumb {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 8px;
      box-shadow: 0 0 5px rgb(0 0 0 / 0.1);
      cursor: pointer;
      transition: transform 0.2s;
    }
    .img-thumb:hover {
      transform: scale(1.05);
    }
    .preview-box {
      background: #e8f5e9;
      border-radius: 12px;
      padding: 1rem 1.5rem;
      box-shadow: inset 0 0 10px rgb(0 146 63 / 0.1);
      font-size: 1rem;
      line-height: 1.4;
    }
    /* Modal image zoom */
    .modal-img {
      width: 100%;
      border-radius: 8px;
    }
    .modal-header.bg-success {
      background-color: #00923F !important;
    }
  </style>
</head>
<body>
<div class="container" role="main" aria-label="‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° ‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤">

  <h4 class="text-center">‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° / ‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤</h4>

  <div class="progress" aria-label="‡πÅ‡∏ñ‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="20">
    <div class="progress-bar" id="progressBar" style="width: 20%;"></div>
  </div>

  <form id="repairForm" novalidate>

    <!-- Step 1 -->
    <section class="step active" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏õ‡∏±‡∏ç‡∏´‡∏≤">
      <div class="mb-4">
        <label for="department">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô / ‡∏Ñ‡∏ì‡∏∞</label>
        <select id="department" class="form-select" required aria-required="true" aria-describedby="deptHelp">
          <option value="" disabled selected>-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
          <option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
          <option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
          <option value="‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà">‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</option>
        </select>
        <div class="invalid-feedback">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</div>
      </div>

      <div class="mb-4">
        <label for="problemType">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏õ‡∏±‡∏ç‡∏´‡∏≤</label>
        <select id="problemType" class="form-select" required aria-required="true" aria-describedby="probHelp">
          <option value="" disabled selected>-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
          <option value="‡πÑ‡∏ü‡∏ü‡πâ‡∏≤">‡πÑ‡∏ü‡∏ü‡πâ‡∏≤</option>
          <option value="‡∏õ‡∏£‡∏∞‡∏õ‡∏≤">‡∏õ‡∏£‡∏∞‡∏õ‡∏≤</option>
          <option value="‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå / ‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢">‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå / ‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢</option>
          <option value="‡∏≠‡∏∑‡πà‡∏ô ‡πÜ">‡∏≠‡∏∑‡πà‡∏ô ‡πÜ</option>
        </select>
        <div class="invalid-feedback">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏õ‡∏±‡∏ç‡∏´‡∏≤</div>
      </div>

      <button type="button" class="btn btn-action w-100" onclick="nextStep()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>
    </section>

    <!-- Step 2 -->
    <section class="step" aria-label="‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö">
      <div class="mb-4">
        <label for="imageInput">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ (1‚Äì10 ‡∏£‡∏π‡∏õ)</label>
        <input
          type="file"
          id="imageInput"
          class="form-control"
          accept="image/*"
          multiple
          required
          aria-required="true"
          aria-describedby="imgHelp"
        />
        <div class="invalid-feedback" id="imgHelp">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏π‡∏õ ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 10 ‡∏£‡∏π‡∏õ</div>
      </div>
      <div id="imagePreview" class="d-flex flex-wrap gap-2" aria-live="polite" aria-atomic="true"></div>

      <div class="d-flex justify-content-between mt-4">
        <button type="button" class="btn btn-secondary" onclick="prevStep()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
        <button type="button" class="btn btn-action" onclick="nextStep()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>
      </div>
    </section>

    <!-- Step 3 -->
    <section class="step" aria-label="‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î">
      <div class="mb-4">
        <label for="subject">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</label>
        <input type="text" id="subject" class="form-control" required aria-required="true" />
        <div class="invalid-feedback">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</div>
      </div>

      <div class="mb-4">
        <label for="details">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
        <textarea id="details" class="form-control" rows="4" required aria-required="true"></textarea>
        <div class="invalid-feedback">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</div>
      </div>

      <div class="d-flex justify-content-between">
        <button type="button" class="btn btn-secondary" onclick="prevStep()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
        <button type="button" class="btn btn-action" onclick="nextStep()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>
      </div>
    </section>

    <!-- Step 4 -->
    <section class="step" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á">
      <div class="mb-4">
        <label for="severity">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á</label>
        <select id="severity" class="form-select" required aria-required="true">
          <option value="" disabled selected>-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
          <option value="‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (‡∏î‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏Å)">‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (‡∏î‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏Å)</option>
          <option value="‡∏°‡∏≤‡∏Å">‡∏°‡∏≤‡∏Å</option>
          <option value="‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</option>
          <option value="‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ / ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á">‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ / ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á</option>
        </select>
        <div class="invalid-feedback">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á</div>
      </div>

      <div class="d-flex justify-content-between">
        <button type="button" class="btn btn-secondary" onclick="prevStep()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
        <button type="button" class="btn btn-action" onclick="preparePreview()">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á</button>
      </div>
    </section>

    <!-- Step 5: Preview -->
    <section class="step" aria-label="‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á">
      <h4 class="mb-3 text-center" style="color:#00923F;">üîé ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á</h4>

      <div class="preview-box" aria-live="polite" aria-atomic="true">
        <p><strong>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:</strong> <span id="previewDepartment"></span></p>
        <p><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏õ‡∏±‡∏ç‡∏´‡∏≤:</strong> <span id="previewProblemType"></span></p>
        <p><strong>‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠:</strong> <span id="previewSubject"></span></p>
        <p><strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</strong> <span id="previewDetails"></span></p>
        <p><strong>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á:</strong> <span id="previewSeverity"></span></p>
        <p><strong>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û:</strong></p>
        <div id="previewImages" class="d-flex flex-wrap gap-2"></div>
      </div>

      <div class="d-flex justify-content-between mt-4">
        <button type="button" class="btn btn-secondary" onclick="prevStep()">‚Üê ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
        <button type="submit" class="btn btn-action">‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
      </div>
    </section>
  </form>
</div>

<div class="modal fade" id="submitModal" tabindex="-1" aria-labelledby="submitModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4 shadow">
      <div class="modal-header bg-success text-white rounded-top-4">
        <h5 class="modal-title mx-auto" id="submitModalLabel">üéâ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h5>
      </div>
      <div class="modal-body text-center fs-5">
        ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß<br />
        ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ üôè
      </div>
      <div class="modal-footer justify-content-center border-0 pb-4">
        <button type="button" class="btn btn-success btn-action px-5" data-bs-dismiss="modal">‡∏ï‡∏Å‡∏•‡∏á</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Image Zoom -->
<div class="modal fade" id="imageZoomModal" tabindex="-1" aria-labelledby="imageZoomLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content rounded-4 shadow">
      <div class="modal-header">
        <h5 class="modal-title" id="imageZoomLabel">‡∏î‡∏π‡∏†‡∏≤‡∏û‡∏Ç‡∏¢‡∏≤‡∏¢</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="‡∏õ‡∏¥‡∏î"></button>
      </div>
      <div class="modal-body text-center">
        <img src="" alt="‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Ç‡∏¢‡∏≤‡∏¢" id="zoomedImage" class="modal-img" />
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  let currentStep = 0;
  const steps = document.querySelectorAll('.step');
  const progressBar = document.getElementById('progressBar');
  const totalSteps = steps.length;

  function showStep(index) {
    steps.forEach((step, i) => {
      step.classList.toggle('active', i === index);
    });
    const progressPercent = ((index + 1) / totalSteps) * 100;
    progressBar.style.width = `${progressPercent}%`;
    progressBar.setAttribute('aria-valuenow', progressPercent);
  }

  function validateStep() {
    let valid = true;
    const currentFields = Array.from(steps[currentStep].querySelectorAll('select, input, textarea'));

    currentFields.forEach(field => {
      if (!field.checkValidity()) {
        field.classList.add('is-invalid');
        valid = false;
      } else {
        field.classList.remove('is-invalid');
      }
    });

    if (currentStep === 1) {
      const files = document.getElementById('imageInput').files;
      if (files.length === 0 || files.length > 10) {
        document.getElementById('imageInput').classList.add('is-invalid');
        valid = false;
      } else {
        document.getElementById('imageInput').classList.remove('is-invalid');
      }
    }
    return valid;
  }

  function nextStep() {
    if (!validateStep()) return;
    if (currentStep < totalSteps - 1) {
      currentStep++;
      showStep(currentStep);
      window.scrollTo({top: 0, behavior: 'smooth'});
    }
  }

  function prevStep() {
    if (currentStep > 0) {
      currentStep--;
      showStep(currentStep);
      window.scrollTo({top: 0, behavior: 'smooth'});
    }
  }

  function preparePreview() {
    if (!validateStep()) return;

    document.getElementById('previewDepartment').textContent = document.getElementById('department').value;
    document.getElementById('previewProblemType').textContent = document.getElementById('problemType').value;
    document.getElementById('previewSubject').textContent = document.getElementById('subject').value;
    document.getElementById('previewDetails').textContent = document.getElementById('details').value;
    document.getElementById('previewSeverity').textContent = document.getElementById('severity').value;

    const previewImages = document.getElementById('previewImages');
    previewImages.innerHTML = '';
    const files = document.getElementById('imageInput').files;
    Array.from(files).forEach(file => {
      const reader = new FileReader();
      reader.onload = e => {
        const img = document.createElement('img');
        img.src = e.target.result;
        img.className = 'img-thumb';
        img.setAttribute('alt', '‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö');
        img.tabIndex = 0;
        img.style.cursor = 'pointer';
        img.addEventListener('click', () => openImageZoom(e.target.result));
        img.addEventListener('keypress', (ev) => {
          if (ev.key === 'Enter' || ev.key === ' ') {
            openImageZoom(e.target.result);
          }
        });
        previewImages.appendChild(img);
      };
      reader.readAsDataURL(file);
    });

    nextStep();
  }

  document.getElementById('imageInput').addEventListener('change', function () {
    const preview = document.getElementById('imagePreview');
    preview.innerHTML = '';
    Array.from(this.files).forEach(file => {
      const reader = new FileReader();
      reader.onload = e => {
        const img = document.createElement('img');
        img.src = e.target.result;
        img.className = 'img-thumb';
        img.setAttribute('alt', '‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö');
        img.tabIndex = 0;
        img.style.cursor = 'pointer';
        img.addEventListener('click', () => openImageZoom(e.target.result));
        img.addEventListener('keypress', (ev) => {
          if (ev.key === 'Enter' || ev.key === ' ') {
            openImageZoom(e.target.result);
          }
        });
        preview.appendChild(img);
      };
      reader.readAsDataURL(file);
    });
  });

  function openImageZoom(src) {
    const modal = new bootstrap.Modal(document.getElementById('imageZoomModal'));
    const zoomedImg = document.getElementById('zoomedImage');
    zoomedImg.src = src;
    modal.show();
  }

  const form = document.getElementById('repairForm');
  form.addEventListener('submit', function (e) {
    e.preventDefault();

    if (!validateStep()) return;

    const modal = new bootstrap.Modal(document.getElementById('submitModal'));
    modal.show();

    modal._element.addEventListener('hidden.bs.modal', () => {
      form.reset();
      currentStep = 0;
      showStep(currentStep);
      document.getElementById('imagePreview').innerHTML = '';
      document.getElementById('previewImages').innerHTML = '';
      window.scrollTo({top: 0, behavior: 'smooth'});
    }, { once: true });
  });

  showStep(currentStep);
</script>
</body>
</html>